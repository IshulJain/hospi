<!DOCTYPE html>

<!-- define angular app -->

<html ng-app="app" id="abcdlf">


<head>
<meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Dashboard</title>

        <!-- Vendor styles -->
        <!-- <link rel="stylesheet" href="/static/vendors/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css"> -->
        <link rel="stylesheet" href="/static/vendors/bower_components/animate.css/animate.min.css">
        <link rel="stylesheet" href="/static/vendors/bower_components/jquery.scrollbar/jquery.scrollbar.css">
        <!-- <link rel="stylesheet" href="/static/vendors/bower_components/fullcalendar/dist/fullcalendar.min.css"> -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- App styles -->
        <link rel="stylesheet" href="/static/css/app.min.css">
  <!-- SCROLLS -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" />

  <!-- SPELLS -->
  <script src="/static/jquery.min.js"></script>
  <script src="/static/angular.min.js"></script>
  <script src="/static/angular-route.js"></script>
  <script src="/static/script.js"></script>
  <style>
  .input-error 
    {
        border-color: red;
    }

    .fa{
        color: #fff;
    }
  </style>
  <!--<script src="/static/genmain.js"></script>-->
</head>

<!-- define angular controller -->
<body data-sa-theme="1">
	<main class="main">
	<header class="header">
                 <div class="navigation-trigger hidden-xl-up" data-sa-action="aside-open" data-sa-target=".sidebar " style="margin-left: 2%;">
                    <i class="fa fa-bars" aria-hidden="true"></i>
                </div>

                <!-- <div>
                    <h1><img src="/static/img/bg/2.png" style="height:50px; width: 150px;"></h1>
                </div>
 -->                <div style="float: left;">
          <div style="float: left; margin-left: 15px">
            <figure class="nav-logo navb-tabs" style="background-color: #000000">
                <img src="/static/img/technex-logo.PNG" style="height:60px; width: 45px; ">
            </figure>
          </div>
        
            <div style="float: right;"><img src="/static/img/bg/2.png" style="height:60px; width: 180px; margin-left: 3%;"></div>
        </div>

             <form class="search"  style="visibility: hidden;">
                    <div class="search__inner">
                        <input type="text" class="search__text" placeholder="Search for people, files, documents...">
                        <i class="zmdi zmdi-search search__helper" data-sa-action="search-close"></i>
                    </div>
                </form>

               
                <!-- <div class="navb-tabs" ><a target="_blank" href="/events/"  style="color: white; font-size: 1.6rem;">Events</a>
                </div> -->
                <button target="_blank" type="button" id="events-btn" style="border-radius: 0px;color: white; font-size: 1.6rem; border: 0px" class="navb-tabs " >Events</button>
                <button target="_blank" type="button" id="ttalk-btn" style="border-radius: 0px;color: white; font-size: 1.6rem; border: 0px" class="navb-tabs " >Think Talks</button>
                <!-- <div class="navb-tabs"><a target="_blank" href="/talks/"  style="color: white; font-size: 1.6rem;     " >Think Talks</a>
                 </div> -->
                <!-- <a href="/logout" id="lg" style="color: white;  font-weight: 600;">Log Out</a> -->
                <button type="button" id="lout-btn" onmouseover="this.style.backgroundColor = '#80222c';" onmouseout="this.style.backgroundColor = '#b8212d';" style="border-radius: 0px;color: white; font-size: 1.6rem; font-weight: 600; background-color: #b8212d" class="btn navb-tabs lout-btn" >Log Out</button>
                <img id="lout-icon" style="max-height: 40px; margin-left: 25%;" src="/static/power-icon.png">
                
            </header>
            <aside id="sideb" class="sidebar">
                <div class="scrollbar-inner">

                    <div class="user">
                        <div class="user__info" data-toggle="dropdown">
                              <img class="user__img" src={% if techProfile.fb %}"{{techProfile.fb.profileImage}}"{% else %} "/static/profile.jpg"{% endif %}> 
                                <!-- <canvas class="user__img" id="user-icon" height="50" width="50" ></canvas> -->
                                 <div>
                                <div class="user__name" style="color: white;">{{user.first_name}}</div>
                                <!-- <div class="user__email">malinda-h@gmail.com</div> -->
                            </div>
                        </div>

                       <!--  <div class="dropdown-menu">
                            <a class="dropdown-item" href="">View Profile</a>
                            <a class="dropdown-item" href="">Settings</a>
                            <a class="dropdown-item" href="">Logout</a>
                        </div> -->
                    </div>

                    <ul class="navigation" style="color: #fff;">
                        <li class=""><a href="#profile"><i class="fa fa-user" aria-hidden="true"></i> Profile</a></li>

                  <!--      <li class="navigation__sub @@variantsactive">
                            <a href=""><i class="zmdi zmdi-view-week"></i> Variants</a>

                            <ul>
                                <li class="@@sidebaractive"><a href="hidden-sidebar.html">Hidden Sidebar</a></li>
                                <li class="@@boxedactive"><a href="boxed-layout.html">Boxed Layout</a></li>
                                <li class="@@hiddensidebarboxedactive"><a href="hidden-sidebar-boxed-layout.html">Boxed Layout with Hidden Sidebar</a></li>
                            </ul>
                        </li>
					-->
                        <li class="@@typeactive sb"><a href="#eventreg"><i class="fa fa-plus-circle" aria-hidden="true"></i> Event registration</a></li>
                        <!-- <li class="@@typeactive"><a href="#workshop"><i class="fa fa-plus-circle" aria-hidden="true"></i> Workshop registration</a></li> -->
                        <li class="@@typeactive sb"><a href="#startupreg"><i class="fa fa-plus-circle" aria-hidden="true"></i> Startup fair registration</a></li>

<!--                        
                        <li class="@@widgetactive"><a href="#contact"><i class="zmdi zmdi-widgets"></i> Widgets</a></li> -->

                        <li class="@@widgetactive sb"><a href="#contacts"><i class="fa fa-users" aria-hidden="true"></i> Contacts</a></li>
                        <!-- <li class="@@widgetactive"><a href="#payment"><i class="fa fa-money" aria-hidden="true"></i> Payments</a></li> -->
<!--                    <li class="@@widgetactive"><a href="#form"><i class="zmdi zmdi-widgets"></i> Form</a></li>-->                        <li class="@@widgetactive sb"><a href="#changepassword"><i class="fa fa-cogs" aria-hidden="true"></i> Change Password</a></li>
                        <li class="@@widgetactive sb"><a href="#editprofile"><i class="fa fa-user-circle-o" aria-hidden="true"></i> Edit Profile</a></li>
                        <li class="@@widgetactive" style="margin-top: 12%; padding-top: 5%;  border-top: 3px solid #6f6f6f; font-weight: 500;">
                            <a target= "_blank" href="https://www.facebook.com/technexiitbhu/" style="font-weight: 500;"><i class="fa fa-facebook" aria-hidden="true" style="margin-top:3px;"></i>Facebook</a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://twitter.com/technexiitbhu" style="font-weight: 500;"><i class="fa fa-twitter" aria-hidden="true" style="margin-top:3px;"></i>Twitter </a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://www.instagram.com/technexiitbhu/" style="font-weight: 500;"><i class="fa fa-instagram" aria-hidden="true" style="margin-top:3px;"></i>Instagram </a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://www.youtube.com/user/technexiitbhu" style="font-weight: 500;"><i class="fa fa-youtube-play" aria-hidden="true" style="margin-top:3px;"></i>Youtube </a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://en.wikipedia.org/wiki/Technex" style="font-weight: 500; "><i class="fa fa-wikipedia-w" aria-hidden="true"  style="margin-top:3px; "></i>Wikipedia </a>
                        </li>
                        <!-- <li class="@@widgetactive"><a href="#add"><i class="zmdi zmdi-widgets"></i> AddMember</a></li> -->

                 <!--       <li class="navigation__sub @@tableactive">
                            <a href=""><i class="zmdi zmdi-view-list"></i> Tables</a>

                            <ul>
                                <li class="@@normaltableactive"><a href="html-table.html">HTML Table</a></li>
                                <li class="@@datatableactive"><a href="data-table.html">Data Table</a></li>
                            </ul>
                        </li>

                        <li class="navigation__sub @@formactive">
                            <a href=""><i class="zmdi zmdi-collection-text"></i> Forms</a>

                            <ul>
                                <li class="@@formelementactive"><a href="form-elements.html">Basic Form Elements</a></li>
                                <li class="@@formcomponentactive"><a href="form-components.html">Form Components</a></li>
                                <li class="@@formvalidationactive"><a href="form-validation.html">Form Validation</a></li>
                            </ul>
                        </li>

                        <li class="navigation__sub @@uiactive">
                            <a href=""><i class="zmdi zmdi-swap-alt"></i> User Interface</a>

                            <ul>
                                <li class="@@colorsactive"><a href="colors.html">Colors</a></li>
                                <li class="@@cssanimationsactive"><a href="css-animations.html">CSS Animations</a></li>
                                <li class="@@buttonsactive"><a href="buttons.html">Buttons</a></li>
                                <li class="@@iconsactive"><a href="icons.html">Icons</a></li>
                                <li class="@@listviewactive"><a href="listview.html">Listview</a></li>
                                <li class="@@toolbarsactive"><a href="toolbars.html">Toolbars</a></li>
                                <li class="@@cardsactive"><a href="cards.html">Cards</a></li>
                                <li class="@@alertactive"><a href="alerts.html">Alerts</a></li>
                                <li class="@@badgesactive"><a href="badges.html">Badges</a></li>
                                <li class="@@breadcrumbsactive"><a href="breadcrumbs.html">Bredcrumbs</a></li>
                                <li class="@@jumbotronactive"><a href="jumbotron.html">Jumbotron</a></li>
                                <li class="@@navsactive"><a href="navs.html">Navs</a></li>
                                <li class="@@paginationactive"><a href="pagination.html">Pagination</a></li>
                                <li class="@@progressactive"><a href="progress.html">Progress</a></li>
                            </ul>
                        </li>

                        <li class="navigation__sub @@componentsactive">
                            <a href=""><i class="zmdi zmdi-group-work"></i> Javascript Components</a>

                            <ul class="navigation__sub">
                                <li class="@@carouselactive"><a href="carousel.html">Carousel</a></li>
                                <li class="@@collapseactive"><a href="collapse.html">Collapse</a></li>
                                <li class="@@dropdownsactive"><a href="dropdowns.html">Dropdowns</a></li>
                                <li class="@@modalsactive"><a href="modals.html">Modals</a></li>
                                <li class="@@popoveractive"><a href="popover.html">Popover</a></li>
                                <li class="@@tabsactive"><a href="tabs.html">Tabs</a></li>
                                <li class="@@tooltipsactive"><a href="tooltips.html">Tooltips</a></li>
                                <li class="@@notificationsactive"><a href="notifications-alerts.html">Notifications & Alerts</a></li>
                            </ul>
                        </li>

                        <li class="navigation__sub @@chartsactive">
                            <a href=""><i class="zmdi zmdi-trending-up"></i> Charts</a>

                            <ul>
                                <li class="@@flotchartsactive"><a href="flot-charts.html">Flot</a></li>
                                <li class="@@otherchartsactive"><a href="other-charts.html">Other Charts</a></li>
                            </ul>
                        </li>

                        <li class="@@calendaractive"><a href="calendar.html"><i class="zmdi zmdi-calendar"></i> Calendar</a></li>

                        <li class="@@photogalleryactive"><a href="photo-gallery.html"><i class="zmdi zmdi-image"></i> Photo Gallery</a></li>

                        <li class="navigation__sub @@samplepagesactive">
                            <a href=""><i class="zmdi zmdi-collection-item"></i> Sample Pages</a>

                            <ul>
                                <li class="@@profileactive"><a href="profile-about.html">Profile</a></li>
                                <li class="@@messagesactive"><a href="messages.html">Messages</a></li>
                                <li class="@@contactsactive"><a href="contacts.html">Contacts</a></li>
                                <li class="@@groupsactive"><a href="groups.html">Groups</a></li>
                                <li class="@@pricingtablesactive"><a href="pricing-tables.html">Pricing Tables</a></li>
                                <li class="@@invoiceactive"><a href="invoice.html">Invoice</a></li>
                                <li class="@@todoactive"><a href="todo-lists.html">Todo Lists</a></li>
                                <li class="@@notesactive"><a href="notes.html">Notes</a></li>
                                <li class="@@loginactive"><a href="login.html">Login & SignUp</a></li>
                                <li class="@@lockscreenactive"><a href="lockscreen.html">Lockscreen</a></li>
                                <li class="@@lockscreenactive"><a href="404.html">404</a></li>
                                <li class="@@emptyactive"><a href="empty.html">Empty Page</a></li>
                            </ul>
                        </li>-->
                    </ul>
                </div>
            </aside>
	</main>
  <!--<nav class="navbar navbar-default">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="/">Angular Routing Example</a>
      </div>

      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><i class="fa fa-home"></i> Home</a></li>
        <li><a href="#about"><i class="fa fa-shield"></i> About</a></li>
        <li><a href="#contact"><i class="fa fa-comment"></i> Contact</a></li>
      </ul>
    </div>
  </nav>
-->
  <div id="main" >

    <!-- angular templating -->
		<!-- this is where content will be injected -->
    <div ng-view></div>
    
<input type='hidden' id='userEmail' value="{{ request.user.techprofile.email }}" /> 
  
 <!-- <footer class="text-center">
    <p>View the tutorial on <a href="http://scotch.io/tutorials/javascript/single-page-apps-with-angularjs-routing-and-templating">Scotch.io</a></p>
  
    <p>View a tutorial on <a href="http://scotch.io/tutorials/javascript/animating-angularjs-apps-ngview">Animating Your Angular Single Page App</a></p>
  </footer>
  -->
        <script src="/static/vendors/bower_components/jquery/dist/jquery.min.js"></script>
        <script src="/static/vendors/bower_components/popper.js/dist/umd/popper.min.js"></script>
        <script src="/static/vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="/static/vendors/bower_components/jquery.scrollbar/jquery.scrollbar.min.js"></script>
        <script src="/static/vendors/bower_components/jquery-scrollLock/jquery-scrollLock.min.js"></script>
        <script src="/static/vendors/bower_components/jquery/dist/jquery.min.js"></script>

        <!-- <script src="/static/vendors/bower_components/salvattore/dist/salvattore.min.js"></script>
        <script src="/static/vendors/bower_components/flot/jquery.flot.js"></script>
        <script src="/static/vendors/bower_components/flot/jquery.flot.resize.js"></script>
        <script src="/static/vendors/bower_components/flot.curvedlines/curvedLines.js"></script>
        <script src="/static/vendors/bower_components/jqvmap/dist/jquery.vmap.min.js"></script>
        <script src="/static/vendors/bower_components/jqvmap/dist/maps/jquery.vmap.world.js"></script>
        <script src="/static/vendors/bower_components/jquery.easy-pie-chart/dist/jquery.easypiechart.min.js"></script>
        <script src="/static/vendors/bower_components/peity/jquery.peity.min.js"></script>
        <script src="/static/vendors/bower_components/moment/min/moment.min.js"></script>
        <script src="/static/vendors/bower_components/fullcalendar/dist/fullcalendar.min.js"></script> -->

        <!-- Charts and maps-->
        <!-- <script src="/static/demo/js/flot-charts/curved-line.js"></script>
        <script src="/static/demo/js/flot-charts/line.js"></script>
        <script src="/static/demo/js/flot-charts/dynamic.js"></script>
        <script src="/static/demo/js/flot-charts/chart-tooltips.js"></script>
        <script src="/static/demo/js/other-charts.js"></script>
        <script src="/static/demo/js/jqvmap.js"></script>
 -->
        <!-- App functions and actions -->
        <script src="/static/js/app.min.js"></script>
        <script type="text/javascript">

/*$(document).ready(function(){
makeimg($("#user_name").html());
});*/
$(document).ready(function(){
    $("#events-btn").on("click",function(){
            window.location = '/events';
    });
    $("#ttalk-btn").on("click",function(){
            window.location = '/talks';
    });
    $(".lout-btn").on("click",function(){
           
            window.location = '/logout';
    });
    $("#lout-icon").on("click",function(){
            console.log('check');
            window.location = '/logout';
    });
    $(".sb").on("click",function(){
            var s=document.getElementById("sideb")
            s.classList.remove("toggled");
    });
    });

        app.service("profileData", function(){
        var staffArray = [
            {
                name: "{{user.first_name}}",
                technexId: "{{techProfile.technexId}}",
                college: "{{techProfile.college.collegeName}}",
                year: "{{techProfile.year}}",
                city: "{{techProfile.city}}",
                email: "{{techProfile.email}}",
                mobile: "{{techProfile.mobileNumber}}",
                profileImage: ({% if techProfile.fb %}"{{techProfile.fb.profileImage}}"{% else %} "/static/profile.jpg"{% endif %}).replace("&amp;","&a")
            }

        ];
        var workshopData = [
             {% for workshop in workshops %}
             {
           workshop: "{{workshop.workshop}}",
           teamId : "{{workshop.teamId}}",
      },
           {% endfor %}
        ];
        var events = [
        {% for team in teams %}
          "{{team.event}}",
          {% endfor %}

        ];
        var teamsData = [
        {% for team in teams %}
        {
          teamName: "{{team.teamName}}",
          leader: "{{team.leader}}",
          leaderEmail: "{{team.leaderEmail}}",
          teamId: "{{team.teamId}}",
          memberNames: {{team.memberNames|safe}},
          memberUrls: {{team.memberUrls|safe}},
          event: "{{team.event}}",
          parentEvent: "{{team.parentEvent}}",
          parentEventLink: "{{team.parentEventLink}}"
          
        },
        {% endfor %}
        ];
        this.getTeamData = function(){
          return teamsData;
        };
        this.getStaffArray = function(){
            return staffArray;
        };
        this.getWorkshopData = function(){
              return workshopData
        };
        this.getEventData = function(){
          return events;
        }
        //updating person
        this.updateInfo = function(personIndex, obj){
            staffArray.splice(personIndex, 1, obj)
        }
    });

        
app.service('fileUpload', ['$http', function ($http) {
    this.uploadFileToUrl = function(file, uploadUrl,data){
        var fd = new FormData();
        fd.append('file', file);
        fd.append('parentEvent', data['parentEvent']);
        fd.append('event',data['event']);
        $http.post(uploadUrl,fd, {
            transformRequest: angular.identity,
            headers: {'Content-Type': undefined}
        })
        .success(function(){
          console.log("jdjdj");
        })
        .error(function(){
          console.log("loose");
        });
    }
}]);
function makeimg(name){
   console.log(name);
    nameSplit = name.split(" ");
    var i,initials="";

    for(i=0;i<Math.min(nameSplit.length,2);i++)
    {
    initials += nameSplit[i].charAt(0).toUpperCase();
  }

var charIndex = initials.charCodeAt(0) - 65,
    colourIndex = charIndex % 19;

var canvas = document.getElementById("user-icon");
console.log("ok")
console.log(initials)
var context = canvas.getContext("2d");

var canvasWidth = $(canvas).attr("width"),
    canvasHeight = $(canvas).attr("height"),
    canvasCssWidth = canvasWidth,
    canvasCssHeight = canvasHeight;
console.log(canvasWidth);
console.log(canvasHeight);
//$("#user-icon").css("border-radius", "200px");
context.fillStyle = "#b8212d"
context.fillRect (0, 0, canvasWidth, canvasHeight);
context.font = "128px Arial";
context.textAlign = "center";
context.fillStyle = "#FFF";
context.border="2px solid white";
context.fillText(initials, canvasCssWidth / 2, canvasCssHeight / 1.3);
}


</script>
</div>
</body>

</html>
