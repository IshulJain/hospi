<!DOCTYPE html>

<!-- define angular app -->

<html ng-app="app" id="abcdlf">


<head>
<meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Dashboard</title>

        <!-- Vendor styles -->
        <!-- <link rel="stylesheet" href="/static/vendors/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css"> -->
        <link rel="stylesheet" href="/static/vendors/bower_components/animate.css/animate.min.css">
        <link rel="stylesheet" href="/static/vendors/bower_components/jquery.scrollbar/jquery.scrollbar.css">
        <!-- <link rel="stylesheet" href="/static/vendors/bower_components/fullcalendar/dist/fullcalendar.min.css"> -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- App styles -->
        <link rel="stylesheet" href="/static/css/app.min.css">
  <!-- SCROLLS -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" />

  <!-- SPELLS -->
  <script src="/static/jquery.min.js"></script>
  <script src="/static/angular.min.js"></script>
  <script src="/static/angular-route.js"></script>
  <script src="/static/script.js"></script>
  <style>
  
      #des {
    display: inline;
    }

    #mob {
    display: none;
    }
@media only screen and (max-width: 500px){
    #des {
    display: none;
    }

    #mob {
    display: inline;
    }
}
   
  .input-error 
    {
        border-color: red;
    }

    .fa{
        color: #fff;
    }


    .modal {
   
    background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
}
.modal-content {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
}
.modal-content{    
    -webkit-animation-name: zoom;
    -webkit-animation-duration: 0.6s;
    animation-name: zoom;
    animation-duration: 0.6s;
}

@-webkit-keyframes zoom {
    from {-webkit-transform:scale(0)} 
    to {-webkit-transform:scale(1)}
}

@keyframes zoom {
    from {transform:scale(0)} 
    to {transform:scale(1)}
}

    .close {
    position: absolute;
    top: 20px;
    right: 30px;
    color: #808080;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;

}
.close:hover,
.close:focus {
    color: #808080;
    text-decoration: none;
    cursor: pointer;
}
@media only screen and (max-width: 700px){
    .modal-content {
        width: 100%;
    }
}


  </style>
  <!--<script src="/static/genmain.js"></script>-->
</head>

<!-- define angular controller -->
<body data-sa-theme="1">
	<main class="main">
	<header class="header">
                 <div class="navigation-trigger hidden-xl-up" data-sa-action="aside-open" data-sa-target=".sidebar " style="margin-left: 2%;">
                    <i class="fa fa-bars" aria-hidden="true"></i>
                </div>

                <!-- <div>
                    <h1><img src="/static/img/bg/2.png" style="height:50px; width: 150px;"></h1>
                </div>
 -->                <div style="float: left;">
          <div style="float: left; margin-left: 15px">
            <figure class="nav-logo navb-tabs" style="background-color: #000000">
                <a href="/"><img src="/static/img/technex-logo.PNG" style="height:60px; width: 45px; "></a>
            </figure>
          </div>
        
            <div style="float: right;"><a href="/"><img src="/static/img/bg/2.png" style="height:60px; width: 180px; margin-left: 3%;"></a></div>
        </div>

             <form class="search"  style="visibility: hidden;">
                    <div class="search__inner">
                        <input type="text" class="search__text" placeholder="Search for people, files, documents...">
                        <i class="zmdi zmdi-search search__helper" data-sa-action="search-close"></i>
                    </div>
                </form>

               
                <!-- <div class="navb-tabs" ><a target="_blank" href="/events/"  style="color: white; font-size: 1.6rem;">Events</a>
                </div> -->
                <button target="_blank" type="button" id="events-btn" style="border-radius: 0px;color: white; font-size: 1.6rem; border: 0px" class="navb-tabs " >Events</button>
                <button target="_blank" type="button" id="ttalk-btn" style="border-radius: 0px;color: white; font-size: 1.6rem; border: 0px" class="navb-tabs " >Think Talks</button>
                <!-- <div class="navb-tabs"><a target="_blank" href="/talks/"  style="color: white; font-size: 1.6rem;     " >Think Talks</a>
                 </div> -->
                <!-- <a href="/logout" id="lg" style="color: white;  font-weight: 600;">Log Out</a> -->
                <button type="button" id="lout-btn" onmouseover="this.style.backgroundColor = '#80222c';" onmouseout="this.style.backgroundColor = '#b8212d';" style="border-radius: 0px;color: white; font-size: 1.6rem; font-weight: 600; background-color: #b8212d" class="btn navb-tabs lout-btn" >Log Out</button>
                <img id="lout-icon" style="max-height: 40px; margin-left: 25%;" src="/static/power-icon.png">
                
            </header>
            <aside id="sideb" class="sidebar">
                <div class="scrollbar-inner">

                    <div class="user">
                        <div class="user__info" data-toggle="dropdown">
                              <img class="user__img" src={% if techProfile.fb %}"{{techProfile.fb.profileImage}}"{% else %} "/static/profile.jpg"{% endif %}> 
                                <!-- <canvas class="user__img" id="user-icon" height="50" width="50" ></canvas> -->
                                 <div>
                                <div class="user__name" style="color: white;">{{user.first_name}}</div>
                                <!-- <div class="user__email">malinda-h@gmail.com</div> -->
                            </div>
                        </div>

                       <!--  <div class="dropdown-menu">
                            <a class="dropdown-item" href="">View Profile</a>
                            <a class="dropdown-item" href="">Settings</a>
                            <a class="dropdown-item" href="">Logout</a>
                        </div> -->
                    </div>

                    <ul class="navigation" style="color: #fff;">
                        <li class="sb"><a href="#profile"><i class="fa fa-user" aria-hidden="true"></i> Profile</a></li>
                         <li id="des"><a data-toggle="modal" data-target=".bs-example-modal-md"><i class="fa fa-facebook"></i> Facebook Feeds</a>
                  </li>
                  <li id="mob"><a data-toggle="modal" data-target=".bs-example-modal-mdd"><i class="fa fa-facebook"></i> Facebook Feeds</a>
                  </li>

                  <!--      <li class="navigation__sub @@variantsactive">
                            <a href=""><i class="zmdi zmdi-view-week"></i> Variants</a>

                            <ul>
                                <li class="@@sidebaractive"><a href="hidden-sidebar.html">Hidden Sidebar</a></li>
                                <li class="@@boxedactive"><a href="boxed-layout.html">Boxed Layout</a></li>
                                <li class="@@hiddensidebarboxedactive"><a href="hidden-sidebar-boxed-layout.html">Boxed Layout with Hidden Sidebar</a></li>
                            </ul>
                        </li>
					-->

                        <li class="@@typeactive sb"><a href="#payment"><i class="fa fa-credit-card" aria-hidden="true"></i> Payment Portal</a></li>
                        <li class="@@typeactive sb"><a href="#eventreg"><i class="fa fa-plus-circle" aria-hidden="true"></i> Event registration</a></li>
                        <li class="@@typeactive"><a href="#workshop"><i class="fa fa-plus-circle" aria-hidden="true"></i> Workshop registration</a></li>
                        <li class="@@typeactive sb"><a href="#startupreg"><i class="fa fa-plus-circle" aria-hidden="true"></i> Startup fair registration</a></li>

<!--                        
                        <li class="@@widgetactive"><a href="#contact"><i class="zmdi zmdi-widgets"></i> Widgets</a></li> -->

                        <li class="@@widgetactive sb"><a href="#contacts"><i class="fa fa-users" aria-hidden="true"></i> Contacts</a></li>
                        <!-- <li class="@@widgetactive"><a href="#payment"><i class="fa fa-money" aria-hidden="true"></i> Payments</a></li> -->
<!--                    <li class="@@widgetactive"><a href="#form"><i class="zmdi zmdi-widgets"></i> Form</a></li>-->                        <li class="@@widgetactive sb"><a href="#changepassword"><i class="fa fa-cogs" aria-hidden="true"></i> Change Password</a></li>
                        <li class="@@widgetactive sb"><a href="#editprofile"><i class="fa fa-user-circle-o" aria-hidden="true"></i> Edit Profile</a></li>
                        <li class="@@widgetactive sb"><a href="#tshirt"><i class="fa fa-user-circle-o" aria-hidden="true"></i> T-shirt</a></li>
                        <li class="@@widgetactive" style="margin-top: 12%; padding-top: 5%;  border-top: 3px solid #6f6f6f; font-weight: 500;">
                            <a target= "_blank" href="https://www.facebook.com/technexiitbhu/" style="font-weight: 500;"><i class="fa fa-facebook" aria-hidden="true" style="margin-top:3px;"></i>Facebook</a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://twitter.com/technexiitbhu" style="font-weight: 500;"><i class="fa fa-twitter" aria-hidden="true" style="margin-top:3px;"></i>Twitter </a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://www.instagram.com/technexiitbhu/" style="font-weight: 500;"><i class="fa fa-instagram" aria-hidden="true" style="margin-top:3px;"></i>Instagram </a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://www.youtube.com/user/technexiitbhu" style="font-weight: 500;"><i class="fa fa-youtube-play" aria-hidden="true" style="margin-top:3px;"></i>Youtube </a>
                        </li>
                        <li class="@@widgetactive">
                            <a target= "_blank" href="https://en.wikipedia.org/wiki/Technex" style="font-weight: 500; "><i class="fa fa-wikipedia-w" aria-hidden="true"  style="margin-top:3px; "></i>Wikipedia </a>
                        </li>
                       
                    </ul>
                </div>
            </aside>
	</main>
 
  <div id="main" >

    <!-- angular templating -->
		<!-- this is where content will be injected -->
    <div ng-view></div>
    	
    
    <div id="content-mobile">
     <div class="modal fade bs-example-modal-mdd in" tabindex="-1" role="dialog" aria-hidden="true" style="display: none; padding-right: 5%;padding-top:15%">
     				<button type="button"  class="close" data-dismiss="modal"><span aria-hidden="true" style="color: #ffffff;">×</span>
                          </button>
                    <div class="modal-dialog modal-md " style=" left: 5% ; max-width:770px">
                    

                      <div class="modal-content">

              
                 	 <iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Ftechnexiitbhu&width=300&colorscheme=light&show_faces=true&border_color&stream=true&header=true&height=500"
scrolling="yes" frameborder="0" style="border:none; overflow:hidden; width:300px; height:500px; background: white; float:left; " allowTransparency="true">
</iframe>
                       
                        

                      </div>
                    </div>
                  </div>

                  </div>
 <div id="content-desktop">
     <div class="modal fade bs-example-modal-md in" tabindex="-1" role="dialog" aria-hidden="true" style="display: none; padding-right: 21px;">
     				<button type="button"  class="close" data-dismiss="modal"><span aria-hidden="true" style="color: #ffffff;">×</span>
                          </button>
                    <div class="modal-dialog modal-md " style=" left: 0% ; max-width:770px">
                    

                      <div class="modal-content">

                     
                       
                         
                         
                 	 <iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Ftechnexiitbhu&width=750&colorscheme=light&show_faces=true&border_color&stream=true&header=true&height=700"
scrolling="yes" frameborder="0" style="border:none; overflow:hidden; width:500px; height:700px; background: white; float:left; " allowTransparency="true">
</iframe>
                       
                        

                      </div>
                    </div>
                  </div>

                  </div>

    
<input type='hidden' id='userEmail' value="{{ request.user.techprofile.email }}" /> 
 
  
 <!-- <footer class="text-center">
    <p>View the tutorial on <a href="http://scotch.io/tutorials/javascript/single-page-apps-with-angularjs-routing-and-templating">Scotch.io</a></p>
  
    <p>View a tutorial on <a href="http://scotch.io/tutorials/javascript/animating-angularjs-apps-ngview">Animating Your Angular Single Page App</a></p>
  </footer>
  -->
        <script src="/static/vendors/bower_components/jquery/dist/jquery.min.js"></script>
        <script src="/static/vendors/bower_components/popper.js/dist/umd/popper.min.js"></script>
        <script src="/static/vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="/static/vendors/bower_components/jquery.scrollbar/jquery.scrollbar.min.js"></script>
        <script src="/static/vendors/bower_components/jquery-scrollLock/jquery-scrollLock.min.js"></script>
        <script src="/static/vendors/bower_components/jquery/dist/jquery.min.js"></script>

       
        <!-- App functions and actions -->
        <script src="/static/js/app.min.js"></script>
        <script type="text/javascript">

/*$(document).ready(function(){
makeimg($("#user_name").html());
});*/
$(document).ready(function(){
    $("#events-btn").on("click",function(){
            window.location = '/events';
    });
    $("#ttalk-btn").on("click",function(){
            window.location = '/talks';
    });
    $(".lout-btn").on("click",function(){
           
            window.location = '/logout';
    });
    $("#lout-icon").on("click",function(){
            console.log('check');
            window.location = '/logout';
    });
    $(".sb").on("click",function(){
            var s=document.getElementById("sideb")
            s.classList.remove("toggled");
    });
    });

        app.service("profileData", function(){
        var staffArray = [
            {

                name: "{{user.first_name}}",
                technexId: "{{techProfile.technexId}}",
                college: "{{techProfile.college.collegeName}}",
                year: "{{techProfile.year}}",
                city: "{{techProfile.city}}",
                email: "{{techProfile.email}}",
                mobile: "{{techProfile.mobileNumber}}",
                profileImage: ({% if techProfile.fb %}"{{techProfile.fb.profileImage}}"{% else %} "/static/profile.jpg"{% endif %}).replace("&amp;","&a")
            }

        ];
        var workshopData = [
             {% for workshop in workshops %}
             {
           workshop: "{{workshop.workshop}}",
           teamId : "{{workshop.teamId}}",
      },
           {% endfor %}
        ];
        var events = [
        {% for team in teams %}
          "{{team.event}}",
          {% endfor %}

        ];
        var teamsData = [
        {% for team in teams %}
        {
          teamName: "{{team.teamName}}",
          leader: "{{team.leader}}",
          leaderEmail: "{{team.leaderEmail}}",
          teamId: "{{team.teamId}}",
          memberNames: {{team.memberNames|safe}},
          memberUrls: {{team.memberUrls|safe}},
          event: "{{team.event}}",
          parentEvent: "{{team.parentEvent}}",
          parentEventLink: "{{team.parentEventLink}}"
          
        },
        {% endfor %}
        ];
        this.getTeamData = function(){
          return teamsData;
        };
        this.getStaffArray = function(){
            return staffArray;
        };
        this.getWorkshopData = function(){
              return workshopData
        };
        this.getEventData = function(){
          return events;
        }
        //updating person
        this.updateInfo = function(personIndex, obj){
            staffArray.splice(personIndex, 1, obj)
        }
    });

        
app.service('fileUpload', ['$http', function ($http) {
    this.uploadFileToUrl = function(file, uploadUrl,data){
        var fd = new FormData();
        fd.append('file', file);
        fd.append('parentEvent', data['parentEvent']);
        fd.append('event',data['event']);
        $http.post(uploadUrl,fd, {
            transformRequest: angular.identity,
            headers: {'Content-Type': undefined}
        })
        .success(function(){
          console.log("jdjdj");
        })
        .error(function(){
          console.log("loose");
        });
    }
}]);
function makeimg(name){
   console.log(name);
    nameSplit = name.split(" ");
    var i,initials="";

    for(i=0;i<Math.min(nameSplit.length,2);i++)
    {
    initials += nameSplit[i].charAt(0).toUpperCase();
  }

var charIndex = initials.charCodeAt(0) - 65,
    colourIndex = charIndex % 19;

var canvas = document.getElementById("user-icon");
console.log("ok")
console.log(initials)
var context = canvas.getContext("2d");

var canvasWidth = $(canvas).attr("width"),
    canvasHeight = $(canvas).attr("height"),
    canvasCssWidth = canvasWidth,
    canvasCssHeight = canvasHeight;
console.log(canvasWidth);
console.log(canvasHeight);
//$("#user-icon").css("border-radius", "200px");
context.fillStyle = "#b8212d"
context.fillRect (0, 0, canvasWidth, canvasHeight);
context.font = "120px Arial";
context.textAlign = "center";
context.fillStyle = "#FFF";
context.border="2px solid white";
context.fillText(initials, canvasCssWidth / 2, canvasCssHeight / 1.3);
}


</script>
</div>
</body>

</html>
